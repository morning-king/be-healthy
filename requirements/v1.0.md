# BeHealthy APP 产品需求文档 (PRD) v1.0

## 1. 文档信息
| 版本 | 日期 | 修改人 | 描述 |
| :--- | :--- | :--- | :--- |
| v1.2 | 2026-01-24 | 开发工程师 | 新增多主题系统（机器人总动员/哆啦A梦等），支持3个月历史运动数据同步，优化日历页空状态数据展示 |
| v1.1 | 2026-01-18 | 开发工程师 | 修复心情选项为宫格选择，优化健身计划工作日/非工作日配置，完善每日一言展示 |
| v1.0 | 2026-01-17 | 项目负责人 | 初始版本，包含核心健身计划、任务执行、数据同步、统计及附加功能 |

## 2. 项目背景
用户为糖尿病前期（空腹6.1，餐后8.2），需通过APP监控每日饮食和运动，为期2个月，目标是康复复查。APP将安装在 OPPO Find X6 Pro 上。

## 3. 产品概述
**BeHealthy** 是一款运行在 Android 端的个人健康管理应用，专注于饮食与运动的计划执行与监控。采用本地化部署，数据安全隐私，无需联网交互。UI 风格采用 Ant Design 精致英伦风。

## 4. 功能需求

### 4.1 核心功能

#### 4.1.1 健身计划管理
*   **创建与编辑**
    *   **计划名称**：文本输入。
    *   **持续时间**：支持按月、按周、按天选择。
    *   **计划目标**：文本，支持 Emoji。
    *   **工作日配置**：
        *   是否包含饮食计划 (Boolean)
        *   是否包含运动计划 (Boolean)
        *   运动目标时间 (分钟)
        *   运动目标步数 (Int)
        *   运动目标消耗热量 (Kcal)
    *   **非工作日配置**：
        *   是否包含饮食计划 (Boolean)
        *   是否包含运动计划 (Boolean)
        *   运动目标时间 (分钟)
        *   运动目标消耗热量 (Kcal)
    *   **备注**：文本，支持 Emoji。
    *   **元数据**：记录创建时间、更新时间。
*   **状态管理**
    *   **启动**：启动计划后，系统根据计划配置初始化每日的“健身任务”数据。
    *   **禁用**：禁用计划后，将禁用/冻结尚未结束的健身任务（或不再生成新任务）。

#### 4.1.2 健身任务执行
*   **任务属性**
    *   关联计划 ID
    *   任务日期
    *   **饮食记录**：
        *   早餐：图片、热量
        *   午餐：图片、热量
        *   晚餐：图片、热量
    *   **运动记录 (工作日)**：
        *   方式：慢走、慢跑、台球、羽毛球 (多选，默认：慢走、台球)
        *   时间：分钟
        *   截图：多张 (可空)
        *   步数
        *   消耗热量
    *   **运动记录 (非工作日)**：
        *   方式：慢走、慢跑、台球、羽毛球、篮球、爬山 (多选)
        *   时间：分钟
        *   消耗热量
        *   截图：多张 (可空)
    *   **状态**：是否完成 (默认为否)
    *   **其他**：备注 (支持 Emoji)、最后更新时间
*   **创建规则**
    *   系统自动根据“健身计划”创建，**不允许**用户手工直接创建孤立任务。
*   **日历视图**
    *   仿 OPPO 原生这日历交互。
    *   **状态指示**：
        *   🔴 红色 + 未完成形状图标：当日任务全部未完成。
        *   🟢 绿色 + 已完成鼓励图标：当日任务全部完成。
        *   🟠 橙色 + 进行中形状图标：部分完成。
        *   无图标：当日无任务。
    *   **交互**：点击日期弹出底部弹窗 (BottomSheet) 或对话框，展示当日任务列表。
    *   **无任务状态优化**：
        *   当选中日期无健身任务时（无论是当天还是历史日期），显示从 OPPO 同步的详细运动数据。
        *   核心数据包含：运动步数、运动时间、消耗能量、运动距离。
*   **任务列表交互**
    *   头部展示进度 (e.g., "3/5").
    *   导航：支持切换“上一天”、“下一天”。
    *   编辑：支持直接编辑各项数据，以及切换“是否完成”状态。
*   **每日通知**
    *   时间点：09:15, 12:15, 18:30, 23:10。
    *   内容：提醒维护当日数据。
    *   行为：点击通知跳转至当日任务列表维护界面。

#### 4.1.3 健身数据同步
*   **数据源**：OPPO 手机系统计步/运动数据 (需调用相关 Android 传感器或 Health Connect API，视权限而定，优先本地计步器)。
*   **频率**：每 5 分钟自动同步。
*   **内容**：步数、距离、热量、运动时长。
*   **机制**：支持失败自动重试、手工触发重试。
*   **历史同步**：
    *   同步最近 3 个月（90天）的历史运动数据并持久化存储。
    *   确保在日历查看历史无任务日期时，能回溯当天的运动表现。

#### 4.1.4 统计分析
*   **健身计划统计页**
    *   总运动天数
    *   总消耗热量
    *   总计划数 / 进行中 / 已完成
    *   **下钻详情** (点击上述数字)：
        *   该计划总任务数
        *   已完成 / 待完成 / 未完成任务数
        *   该计划总消耗热量

### 4.2 附加功能

#### 4.2.1 心情记录
*   **心情枚举**：开心、美滋滋、小确幸、难过、气愤、倒霉、平淡、懵圈、焦虑、恐惧。
*   **视图**：日历视图查看每日心情。
*   **统计**：
    *   按周、按月、按年统计每种心情的分布次数。

#### 4.2.2 每日信息 (道德经)
*   **内容**：每日推送《道德经》三句。
*   **展示**：句子、所属章节、释义。

#### 4.2.3 多主题系统
*   **交互目标**：切换主题后，整体视觉样式（配色、图标）和交互体验（动画）实现一体化。
*   **支持主题**：
    *   **默认 (Default)**：标准 Q 版风格。
    *   **机器人总动员 (Wall-E)**：专属配色 + Wall-E 形象 Loading 动画。
    *   **哆啦A梦 (Doraemon)**：蓝白配色 + 哆啦A梦形象 Loading 动画。
    *   **小黄人 (Minions)**：黄蓝配色 + 小黄人形象 Loading 动画。
    *   **科技风 (Tech)**：冷色调 + 几何机器人 Loading 动画。
    *   **NBA**：篮球风格 + 运动元素。
    *   **羽毛球 (Badminton)**：羽毛球运动风格。
    *   **世界杯 (FootballWorldCup)**：足球盛宴风格。
*   **动画应用**：
    *   **App 启动页**：展示对应主题的 Loading 角色动画。
    *   **全局 Loading**：所有异步加载场景使用主题专属动画。

### 4.3 非功能需求 (NFR)

*   **交互风格 (UI/UX)**
    *   **Ant Design Mobile** 设计语言。
    *   **配色**：精致英伦风 (深蓝、暗红、米白等搭配)，圆角设计。
    *   **动画**：有趣的微交互动画。
    *   **主题**：支持更换主题配色。
    *   **灵动岛通知**：仿 iOS 灵动岛或 Android 悬浮窗/通知栏常驻，展示：
        *   当日已完成/总任务数。
        *   当周、当月已完成数。
*   **部署与环境**
    *   **平台**：Android (Target OPPO Find X6 Pro)。
    *   **架构**：纯客户端，本地 SQLite/Room 数据库，无服务端。
    *   **运行**：常驻后台 (需处理保活或前台服务)，支持自动安装/调试环境搭建。

## 5. 后续规划
*   根据用户每日使用反馈进行迭代。
